<div class="container" fxLayout="column" fxLayoutGap="5px">
    <div *ngIf="therapist$ |async as therapist">
        <app-therapist-card [uidTherapist]="therapist.uid" style="margin-bottom: 3px;"></app-therapist-card>
    </div>

    <div>
        <app-seans-payment></app-seans-payment>
    </div>


    <div>
        <mat-card>
            <mat-horizontal-stepper [linear]="false" #stepper>
                <mat-step [stepControl]="firstFormGroup">
                    <ng-template matStepLabel>Fill out your address</ng-template>
                    <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                        [(ngModel)]="favoriteSeason">
                        <div class="step1" fxLayout="column">
                            <div class="section" fxFlex>
                                <div [ngClass]="{'color_change':favoriteSeason==='video'}" fxLayout="row">
                                    <mat-radio-button [checked]="true" value="video" class="example-radio-button">
                                        <div fxFlex>
                                            <div class="type">
                                                <i style="font-size: 30px;" class="material-icons">
                                                    contact_phone
                                                </i>
                                                <span style="margin-left: 5px;">
                                                    <strong>Videolu Görüşme</strong>
                                                </span>
                                            </div>
                                            <div class="price">
                                                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Harum quae
                                                atque
                                            </div>
                                        </div>
                                    </mat-radio-button>
                                </div>
                            </div>
                            <div class="section" fxFlex>
                                <hr class="card-divider">
                            </div>
                            <div class="section" fxFlex>
                                <div [ngClass]="{'color_change':favoriteSeason==='ses'}" fxLayout="row">
                                    <mat-radio-button class="example-radio-button" value="ses">
                                        <div fxFlex>
                                            <div class="type">
                                                <i style="font-size: 30px;" class="material-icons">
                                                    mic
                                                </i>
                                                <span style="margin-left: 5px;">
                                                    <strong>Sesli Görüşme</strong>
                                                </span>
                                            </div>
                                            <div class="price">
                                                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Harum quae
                                                atque
                                            </div>
                                        </div>
                                    </mat-radio-button>
                                </div>
                            </div>
                            <div class="section" fxFlex>
                                <hr class="card-divider">
                            </div>
                            <div class="section" fxFlex>
                                <div [ngClass]="{'color_change':favoriteSeason==='message'}" fxLayout="row">
                                    <mat-radio-button value="message" class="example-radio-button">
                                        <div fxFlex>
                                            <div class="type">
                                                <i style="font-size: 30px;" class="material-icons">
                                                    message
                                                </i>
                                                <span style="margin-left: 5px;">
                                                    <strong>Message</strong>
                                                </span>
                                            </div>
                                            <div class="price">
                                                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Harum quae
                                                atque
                                            </div>
                                        </div>
                                    </mat-radio-button>
                                </div>
                            </div>

                        </div>

                    </mat-radio-group>

                    <div fxLayout="row" fxLayoutAlign="end" style="margin-right: 10px;">
                        <button class="banner-button" mat-button matStepperNext>Devam</button>
                    </div>


                </mat-step>
                <mat-step [stepControl]="messageForm">
                    <form *ngIf="favoriteSeason==='message'" [formGroup]="messageForm" (ngSubmit)="messageSubmit()">
                        <ng-template matStepLabel>Fill out your address</ng-template>
                        <div fxLayout="row" fxLayoutAlign="center">
                            <div fxFlex="80%" fxLayoutGap="10px">
                                <div fxLayout="column">
                                    <div fxFlex>
                                        <h3 class="explain">Formda verdiğiniz cevaplara göre,
                                            size
                                            en
                                            iyi şekilde yardım edebilecek tarapistler
                                            önerilecektirr </h3>
                                    </div>
                                    <mat-form-field fxFlex>
                                        <input matInput formControlName="konu" placeholder="Konu">
                                    </mat-form-field>

                                    <mat-form-field fxFlex>
                                        <textarea formControlName="message" matInput
                                            placeholder="Mesajınızı Yazınız..."></textarea>
                                    </mat-form-field>

                                </div>
                            </div>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="end" style="margin-right: 10px;">
                            <button mat-button matStepperPrevious>Back</button>
                            <button class="banner-button" mat-button matStepperNext>Devam</button>
                        </div>


                    </form>
                    <div *ngIf="favoriteSeason==='video'||'ses'">
                        <div fxLayout="row" fxLayoutAlign="center">
                            <div fxFlex="80%" fxLayoutGap="10px">
                                <div fxLayout="column">
                                    <div fxFlex>
                                        <h3 class="explain">Lorem, ipsum dolor sit amet consectetur adipisicing elit.
                                            Nostrum, doloremque? Aperiam atque tempora quod quisquam. Non, porro?
                                            Voluptatem qui, tempore perspiciatis officiis fugit, neque, quibusdam
                                            molestiae nulla minus hic tempora.</h3>
                                    </div>
                                    <div fxFlex>
                                        <mat-form-field fxFlex>
                                            <textarea matInput [(ngModel)]="bilgi"
                                                placeholder="Ön bilgilendirme"></textarea>
                                        </mat-form-field>
                                    </div>
                                    <div>{{bilgi}}</div>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="end" style="margin-right: 10px;">
                            <button mat-button matStepperPrevious>Back</button>
                            <button class="banner-button" mat-button matStepperNext>Devam</button>
                        </div>
                    </div>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Done</ng-template>

                    <div fxLayout="row" fxLayoutAlign="center">
                        <div fxFlex="80%" fxLayoutGap="10px">
                            <form fxLayout="column" [formGroup]="paymentForm" (ngSubmit)="onSubmitPayment(therapist)">
                                <div fxFlex>
                                    <h3 class="explain">Payment</h3>
                                </div>
                                <mat-form-field fxFlex hintLabel="Should be at least 6 characters long.">
                                    <input type="tel" matInput placeholder="card Number" formControlName="cardNumber"
                                        appCardNumber>
                                    <mat-error *ngIf="paymentForm.get('cardNumber').hasError('required')">Lütfen
                                        bir
                                        kard
                                        numarası giriniz</mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex hintLabel="Should be at least 6 characters long.">
                                    <input type="text" matInput placeholder="Card Name" formControlName="cardName">
                                    <mat-error>Lütfen kard üzerinde yazılı ismi
                                        giriniz</mat-error>
                                </mat-form-field>

                                <div fxFlex>
                                    <div fxLayout="row wrap">
                                        <div fxFlex>
                                            <mat-form-field>
                                                <mat-label>expration</mat-label>
                                                <select matNativeControl required>
                                                    <option value="">Month</option>
                                                    <option value="1">01</option>
                                                    <option value="2">02</option>
                                                    <option value="3">03</option>
                                                    <option value="4">04</option>
                                                    <option value="5">05</option>
                                                    <option value="6">06</option>
                                                    <option value="7">07</option>
                                                    <option value="8">08</option>
                                                    <option value="9">09</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex>
                                            <mat-form-field>
                                                <mat-label>expration</mat-label>
                                                <select matNativeControl required>
                                                    <option value="">Year</option>
                                                    <option value="20">2020</option>
                                                    <option value="21">2021</option>
                                                    <option value="22">2022</option>
                                                    <option value="23">2023</option>
                                                    <option value="24">2024</option>
                                                    <option value="25">2025</option>
                                                    <option value="26">2026</option>
                                                    <option value="27">2027</option>
                                                    <option value="28">2028</option>
                                                    <option value="29">2029</option>
                                                    <option value="30">2030</option>
                                                </select>
                                            </mat-form-field>

                                        </div>
                                        <div fxFlex >
                                            <mat-form-field hintLabel="Should be at least 6 characters long.">
                                                <input type="text" matInput placeholder="CVV" formControlName="cardCVV" appCardCvv>
                                                <mat-error>Lütfen kard üzerinde yazılı ismi
                                                    giriniz</mat-error>
                                            </mat-form-field>
                                         </div >

                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="end" style="margin-right: 10px;">
                        <button mat-button matStepperPrevious>Back</button>
                        <button mat-button (click)="stepper.reset()">Reset</button>
                        <button class="banner-button" mat-button matStepperNext>Öde</button>
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </mat-card>
    </div>










    <mat-card style="top: 80px;" *ngIf="therapist$ |async as therapist">
        <div style="border: 1px solid black;" fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="20px">
            <div fxFlex="10%">
                <!--therapist photo and selection-->
                <div style="border: 1px solid black;" fxLayout="column">
                    <div>
                        <img mat-card-image
                            src="https://i.pinimg.com/originals/00/fc/cf/00fccf7594ff0822281187d77a132e01.png">
                    </div>
                    <div>
                        <button mat-raised-button color="primary" (click)="askType('message')">Message</button>
                        <button mat-raised-button color="primary" (click)="askType('chat')">Chat</button>
                        <button mat-raised-button color="primary">Voice Call</button>
                        <button style="width: 100%;" mat-raised-button color="primary">Face to Face</button>
                    </div>
                    <div *ngFor="let therapistOfUser of room$ | async">
                        <a [routerLink]="therapistOfUser.id">{{therapistOfUser.therapist.therapistname}}</a>
                    </div>
                </div>
            </div>
            <!--therapist photo and selection-->

            <div fxFlex="90%" style="border: 1px solid black;">
                <!--biografi and payment-->
                <div fxLayout="column" fxFlexFill>
                    <div fxFlex>
                        <h5>{{therapist.displayName}} State:{{therapist.state}}</h5>
                    </div>
                    <div fxFlex>
                        <h5>Uzmanlık: {{therapist.expertise}}</h5>
                    </div>
                    <div>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fugit earum iste sit ipsam
                            laudantium
                            quasi et neque pariatur aliquid unde commodi, consectetur vitae deleniti voluptatibus
                            soluta!
                            Laudantium repudiandae provident possimus?</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fugit earum iste sit ipsam
                            laudantium
                            quasi et neque pariatur aliquid unde commodi, consectetur vitae deleniti voluptatibus
                            soluta!
                            Laudantium repudiandae provident possimus?</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fugit earum iste sit ipsam
                            laudantium
                            quasi et neque pariatur aliquid unde commodi, consectetur vitae deleniti voluptatibus
                            soluta!
                            Laudantium repudiandae provident possimus?</p>
                    </div>
                    <div>
                        <!--chat/message...-->

                        <div fxLayout fxLayoutAlign="center center">
                            <!--chat-->
                            <form fxLayout="column" fxFlex="80%" class="paymentForm" style="border: 1px solid red;"
                                [formGroup]="paymentForm" (ngSubmit)="onSubmitPayment(therapist)">

                                <div *ngIf="ask=='message'">
                                    <!--message-->
                                    <mat-form-field class="example-full-width">
                                        <textarea formControlName="message" matInput placeholder="message"></textarea>
                                    </mat-form-field>
                                </div>

                                <mat-form-field fxFlex="50%" hintLabel="Should be at least 6 characters long.">
                                    <input type="tel" matInput placeholder="card Number" formControlName="cardNumber"
                                        appCardNumber>
                                    <mat-error *ngIf="paymentForm.get('cardNumber').hasError('required')">Lütfen bir
                                        kard
                                        numarası giriniz</mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex="50%" hintLabel="Should be at least 6 characters long.">
                                    <input type="text" matInput placeholder="Card Name" formControlName="cardName">
                                    <mat-error>Lütfen kard üzerinde yazılı ismi
                                        giriniz</mat-error>
                                </mat-form-field>
                                <mat-form-field fxFlex="50%" hintLabel="Should be at least 6 characters long.">
                                    <input type="text" matInput placeholder="CVV" formControlName="cardCVV" appCardCvv>
                                    <mat-error>Lütfen kard üzerinde yazılı ismi
                                        giriniz</mat-error>
                                </mat-form-field>

                                <mat-form-field>
                                    <mat-label>Cars</mat-label>
                                    <select matNativeControl required>
                                        <option value="volvo">Volvo</option>
                                        <option value="saab">Saab</option>
                                        <option value="mercedes">Mercedes</option>
                                        <option value="audi">Audi</option>
                                    </select>
                                </mat-form-field>

                                <mat-form-field>
                                    <mat-label>Cars</mat-label>
                                    <select matNativeControl required>
                                        <option value="volvo">Volvo</option>
                                        <option value="saab">Saab</option>
                                        <option value="mercedes">Mercedes</option>
                                        <option value="audi">Audi</option>
                                    </select>
                                </mat-form-field>

                                <button type="submit" mat-raised-button color="primary">Giriş</button>

                            </form>

                        </div>
                    </div>

                </div>


            </div>

        </div>

    </mat-card>
</div>