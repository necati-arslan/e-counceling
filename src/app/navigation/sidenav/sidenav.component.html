<mat-nav-list>
    <ng-container *ngIf="userAuth?.uid && !mobileQuery && !currentUrl ">
        <mat-list-item fxLayoutAlign="flex-end" (click)="onClose(isExpanded = !isExpanded)">
            <mat-icon class="menu-button" [ngClass]="{'rotated' : !isExpanded}">navigate_before</mat-icon>
        </mat-list-item>
        <mat-divider></mat-divider>

    </ng-container>


    <div *ngIf="lastSeans$ | async as lastSeans">
        <a mat-list-item class="warningMain" *ngIf="lastSeans?.state==='continuing'"
            [routerLink]="['/chat',lastSeans.roomId,lastSeans.seansId]">
            <mat-icon style="margin-right: 10px;" matBadge="1" matBadgeColor="warn">warning</mat-icon>
            <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Yeni Seans</span>
        </a>
    </div>

    <a mat-list-item *ngIf="userAuth?.type==='therapist'" routerLink="/userOfTherapist">
        <mat-icon>account_circle</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Danışanlar</span>
    </a>
    <a mat-list-item *ngIf="userAuth?.type==='therapist'" routerLink="/questiontotherapist">
        <mat-icon  *ngIf="countQuestion>0" [matBadge]="countQuestion" matBadgeColor="warn">mail</mat-icon>
        <mat-icon *ngIf="countQuestion===0">mail</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">&nbsp;&nbsp;Gelen Sorular</span>
    </a>
    <!--matching-->
    <mat-list-item routerLink="/matching" *ngIf="userAuth?.uid">
        <mat-icon>search</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Therapist Bul</span>
    </mat-list-item>
    <!--matching-->
    <a mat-list-item *ngIf="userAuth?.type==='user'" routerLink="/questiontotherapist">
        <mat-icon style="margin-right: 10px;" style="margin-right: 10px;" *ngIf="countQuestion>0" [matBadge]="countQuestion" matBadgeColor="warn">
            mail</mat-icon> 
        <mat-icon *ngIf="countQuestion===0">mail</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Sorularınız</span>
    </a>

    <!--therapist-->
    <mat-list-item *ngIf="userAuth?.uid" (click)="showSubmenu = !showSubmenu">
        <mat-icon>person</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Therapists</span>
        <mat-icon class="menu-button" [ngClass]="{'rotated' : showSubmenu}" *ngIf="isExpanded || mobileQuery">
            expand_more</mat-icon>
    </mat-list-item>
    <div class="submenu" [ngClass]="{'expanded' : showSubmenu}" *ngIf="isExpanded">
        <a *ngFor="let therapistOfUser of rooms$ | async" mat-list-item
            [routerLink]="['/therapistOfUser',therapistOfUser?.uid,therapistOfUser?.roomId]">
            <img class="therapistImg" *ngIf="therapistOfUser?.photoURL" [src]="therapistOfUser?.photoURL" alt="">
            <span>{{therapistOfUser?.displayName}}</span>
        </a>
    </div>
    <!--therapist-->
    <mat-list-item routerLink="/appointmentTable" *ngIf="userAuth?.uid">
        <mat-icon style="margin-right: 10px;" *ngIf="countAppointment>0" [matBadge]="countAppointment" matBadgeColor="warn">mail</mat-icon>
        <mat-icon *ngIf="countAppointment===0">mail</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Randevu</span>
    </mat-list-item>

    <a mat-list-item routerLink="/how" (click)="onClose()">
        <mat-icon>account_circle</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Nasıl Çalışır</span>
    </a>
   
    <a mat-list-item routerLink="/about-us" (click)="onClose()">
        <mat-icon>account_circle</mat-icon>
        <span *ngIf="isExpanded || mobileQuery" class="nav-caption">Hakkımızda</span>
    </a>
    <a class="hemenBasla" mat-list-item *ngIf="!userAuth?.uid" (click)="startCounceling()">
        <span class="nav-caption">Hemen Başla</span>
    </a>
    <mat-divider *ngIf="userAuth?.uid && !mobileQuery && !currentUrl"></mat-divider>

    <a mat-list-item routerLink="/profile-edit" *ngIf="userAuth?.type">
        <mat-icon>account_circle</mat-icon>
        <ng-container *ngIf="isExpanded || mobileQuery">
            <span *ngIf="userAuth?.displayName;else userEmail" class="nav-caption">{{userAuth.displayName }}</span>
            <ng-template #userEmail>
                <span class="nav-caption">{{userAuth.email | email}}</span>
            </ng-template>
        </ng-container>
    </a>
    <a mat-list-item *ngIf="userAuth?.uid" (click)="onLogout()">
        <mat-icon>keyboard_return</mat-icon>
        <span *ngIf="isExpanded" class="nav-caption">Oturum Kapat</span>
    </a>


</mat-nav-list>